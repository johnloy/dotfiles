- defaults:
    link:
      create: true
      relink: true
    shell:
      stdin: true
      stdout: true
      stderr: true

- create:
    - ~/.config
    - ~/bin

- clean: ['~', '~/.config']

- link:
    ~/.dotfiles: ''
    ~/.hushlogin: hushlogin
    ~/.inputrc: inputrc
    ~/.config/:
      glob: true
      path: config/*
      exclude: [ config/gh ]
    ~/.config/gh/:
      glob: true
      create: false
      path: config/gh/*
    ~/bin:
      path: bin
      force: true
    ~/.profile: sh/profile
    ~/.bashrc: bash/bashrc
    ~/.bash_profile: bash/bash_profile
    ~/.bash_logout: bash/bash_logout
    ~/.zshrc: zsh/zshrc
    ~/.zprofile: zsh/zprofile
    ~/.gitconfig: git/gitconfig
    ~/.gitignore: git/gitignore
    ~/.Brewfile: Brewfile
    ~/.default-npm-packages: default-npm-packages
    ~/.default-python-packages: default-python-packages

- shell:
    - command: [git submodule update --init --recursive]
      description: Installing/updating submodules
    - command: [brew bundle --file=~/.Brewfile]
      description: Installing Homebrew packages
    - command: [./zsh/fix-compinit.zsh]
      description: Fixing zsh compinit
    - command: [mise install]
      description: Installing dev runtimes with mise
    - command: [npm-install-globally ~/.default-npm-packages]
      description: Installing global npm packages
    # - command: [gh auth login]
    #   description: Authenticating with GitHub
    #   if: '[ ! gh auth status > /dev/null 2>&1 ]'
    #   stdin: true
    #   stdout: true
    #   stderr: true
